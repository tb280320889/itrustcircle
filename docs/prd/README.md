# 02 PRD（产品需求文档）

PRD 定义 iTrustCircle 产品的目标、范围、需求和成功度量，是所有后续实现工作的基础和依据。

## 文档体系

### 主文档
- **[MVP PRD](./mvp-prd.md)**：产品核心需求、范围边界、成功度量

### 关键章节解读

#### 1. 问题背景（第 1 章）
- **核心创新**：被动触发（BLE断联+倒计时无人取消）
- **解决场景**：突发失能、被抢手机、无法主动操作
- **MVP 定位**：稳定、低心智、低功耗的闭环

#### 2. 三角色模型（第 4.1 节）
```
Tower（塔台）    ←→    Sentinel（哨兵）    ←→    Contact（联系人）
家里旧设备             随身手机              无需应用
接收/存储/通知         监测/触发/上报        接收/响应/行动
```

#### 3. 核心需求（第 6 章）
- **R1-R8**：8 个核心功能需求，覆盖完整闭环
- **NFR**：可靠性、功耗、安全、可观测性要求
- **度量指标**：M1-M5 成功度量标准

#### 4. 技术约束（第 8 章）
- **技术栈**：SvelteKit + Capacitor v7（Android）
- **版本底线**：Android API 23+
- **开发约束**：WIP=1、Capacitor 工作流

## PRD 与其他文档的关系

### PRD → 用户旅程
- PRD 定义角色和需求 → 旅程定义具体行为流程
- PRD R1-R8 → 旅程 F 章验收点
- PRD 问题场景 → 旅程 E 章失败模式

### PRD → ADR
- PRD 技术约束 → ADR-0001 客户端形态
- PRD 身份需求 → ADR-0002 配对机制
- PRD 数据需求 → ADR-0004 数据模型
- PRD 通知需求 → ADR-0005 通知通道

### PRD → Failure Modes
- PRD P1-P3 问题 → Failure Modes 具体场景
- PRD NFR 要求 → Failure Modes 恢复策略
- PRD 度量指标 → Failure Modes 验收方式

### PRD → 验收文档
- PRD 成功度量 → 验收用例通过标准
- PRD 范围边界 → 验收范围定义
- PRD 质量要求 → 工程健康检查

## 需求追踪矩阵

| PRD 章节 | 对应文档 | 验证方式 |
|---------|---------|---------|
| 4.1 角色定义 | journeys/tower.md, sentinel.md, contact.md | 旅程 A-F 章完整性 |
| 5.1 范围定义 | 所有 ADR 决策 | ADR 状态和验证方式 |
| 6.1 功能需求 | acceptance.md 功能验收用例 | AC-TO/SE/CO 系列 |
| 6.2 非功能需求 | failure-modes.md | Failure Mode 覆盖率 |

## 质量保证

### 一致性检查
- ✅ 所有 ADR 都能在 PRD 中找到对应需求
- ✅ 所有旅程角色与 PRD 定义一致
- ✅ 所有 Failure Mode 对应 PRD 问题场景

### 可追踪性
- ✅ 每个需求都有明确的验收点
- ✅ 每个功能都有对应的技术决策
- ✅ 每个失败模式都有恢复策略

### 可执行性
- ✅ 所有需求都有明确的验证方式
- ✅ 所有度量都有可量化的标准
- ✅ 所有约束都有可检查的条件

## 使用指南

### 开发前
1. 阅读 PRD 第 1-2 章，理解项目背景和目标
2. 重点关注第 6 章需求，明确功能要求
3. 熟悉第 8 章约束，了解技术限制

### 开发中
1. 每个功能实现前，确认对应的 PRD 需求编号
2. 实现过程中，参考对应的用户旅程和 ADR
3. 遇到问题时，查阅 Failure Modes 的处理策略

### 开发后
1. 使用验收文档验证功能完整性
2. 对应 PRD 度量指标检查质量
